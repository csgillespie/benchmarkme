---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# System benchmarking 

[![Build Status](https://travis-ci.org/csgillespie/benchmarkme.svg?branch=master)](https://travis-ci.org/csgillespie/benchmarkme)
[![codecov.io](https://codecov.io/github/csgillespie/benchmarkme/coverage.svg?branch=master)](https://codecov.io/github/csgillespie/benchmarkme?branch=master)
[![Downloads](http://cranlogs.r-pkg.org/badges/benchmarkme?color=brightgreen)](http://cran.rstudio.com/package=benchmarkme)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/benchmarkme)](http://cran.r-project.org/package=benchmarkme)

R benchmarking made easy. The package contains a number of benchmarks, heavily based on the benchmarks at http://r.research.att.com/benchmarks/R-benchmark-25.R, for assessing 
the speed of your system. 


## Overview

The package is on [CRAN](https://cran.r-project.org/web/packages/benchmarkme/) and can be installed in the usual way

```{r, eval=FALSE}
install.packages("benchmarkme")
```

There are two groups of benchmarks:

  * `benchmark_std()`: this benchmarks numerical operations such as loops and matrix operations. The benchmark comprises 
  of three separate benchmarks: `prog`, `matrix_fun`, and `matrix_cal`.
  * `benchmark_io()`: this benchmarks reading and writing a 5, 50, and 200 MB csv file.

### The benchmark_std() function

This benchmarks numerical operations such as loops and matrix operations. 
This benchmark comprises of three separate benchmarks: `prog`, `matrix_fun`, and `matrix_cal`.
If you have less than 3GB of RAM (run `get_ram()` to find out how much is
available on your system), then you should kill any memory hungry applications, e.g.
firefox, and set `runs = 1` as an argument.

To benchmark your system, use

```{r eval=FALSE}
## Increase runs if you have a higher spec machine
res = benchmark_std(runs = 3)
```
and upload your results

```{r, eval=FALSE}
## You can control exactly what is uploaded. See details below.
upload_results(res)
```

You can compare your results to other users via

```{r eval=FALSE}
plot(res)
```

### The benchmark_io() function

This function benchmarks reading and writing a 5MB, 50MB and 200MB (if you have less than 4GB of RAM, reduce the number
of `runs` to 1). Run the benchmark using
```{r eval=FALSE}
res_io = benchmark_std(runs = 3)
upload_results(res_io)
plot(res_io)
```

By default the files are written to a temporary directory generated
```{r eval=FALSE}
tempdir()
```
You can alter this to via the `tmpdir` argument. This is useful for comparing
hard drive access to a network drive.


## Machine specs

The package has a few useful functions for extracting system specs:

  * RAM: `get_ram()`
  * CPUs: `get_cpu()`
  * BLAS library: `get_linear_algebra()`
  * Is byte compiling enabled: `get_byte_compiler()`
  * General platform info: `get_platform_info()`
  * R version: `get_r_version()`
  
The above functions have been tested on a number of systems. If they don't work
on your system, please raise [GitHub](https://github.com/csgillespie/benchmarkme/issues) issue.

## Uploaded data sets

A summary of the uploaded data sets is available in the [benchmarkmeData](https://github.com/csgillespie/benchmarkme-data) package
```{r}
data(past_results, package = "benchmarkmeData")
```

A column of this data set, contains the unique identifier returned by the
`upload_results` function. A complete version of the uploaded data sets will be made
available (soon) in a companion package.

## What's uploaded

Two objects are uploaded:

1. Your benchmarks from `benchmark_std` or `benchmark_io`;
1. A summary of your system information (`get_sys_details()`).

The `get_sys_details()` returns:

  * `Sys.info()`;
  * `get_platform_info()`;
  * `get_r_version()`;
  * `get_ram()`;
  * `get_cpu()`;
  * `get_byte_compiler()`;
  * `get_linear_algebra()`;
  * `installed.packages()`;
  * `Sys.getlocale()`;
  * The `benchmarkme` version number;
  * Unique ID - used to extract results;
  * The current date.

The function `Sys.info()` does include the user and nodenames. In the public release
of the data, this information will be removed. If you don't wish to upload certain
information, just set the corresponding argument, i.e.

```{r eval=FALSE}
upload_results(res, args = list(sys_info=FALSE))
```




